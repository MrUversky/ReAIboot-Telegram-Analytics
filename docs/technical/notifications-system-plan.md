# üì¢ –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ - –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π ReAIboot –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç—á–µ—Ç–æ–≤ –≤ Telegram –±–æ—Ç–∞. –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- üîç **–ê–Ω–∞–ª–∏–∑ –≤–∏—Ä–∞–ª—å–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–æ–≤ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- üìä **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
- ü§ñ **Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤ –≤ –±–æ—Ç–∞
- ‚è∞ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥** - —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- üéõÔ∏è **UI —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
üèóÔ∏è ReAIboot Notification System
‚îú‚îÄ‚îÄ üé® Frontend (Next.js)
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ /reports - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ üîß /admin/notifications - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ ‚è∞ /admin/schedules - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π
‚îÇ
‚îú‚îÄ‚îÄ üîß Backend (FastAPI)
‚îÇ   ‚îú‚îÄ‚îÄ ü§ñ telegram_bot.py - Telegram Bot API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ ‚è∞ scheduler.py - APScheduler –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ üìä reports.py - –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç—á–µ—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ üì® notifications.py - –ú–µ–Ω–µ–¥–∂–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ
‚îú‚îÄ‚îÄ üíæ Database (Supabase)
‚îÇ   ‚îú‚îÄ‚îÄ notification_settings - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ parsing_schedules - –†–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ notification_history - –ò—Å—Ç–æ—Ä–∏—è –æ—Ç–ø—Ä–∞–≤–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ report_templates - –®–∞–±–ª–æ–Ω—ã –æ—Ç—á–µ—Ç–æ–≤
‚îÇ
‚îî‚îÄ‚îÄ ü§ñ Telegram Bot
    ‚îî‚îÄ‚îÄ iivka_bot - –ü–æ–ª—É—á–∞—Ç–µ–ª—å –æ—Ç—á–µ—Ç–æ–≤
```

## –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### üöÄ **–≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤ (–¢–µ–∫—É—â–∏–π)**

#### –¶–µ–ª–∏:
- –°–æ–∑–¥–∞—Ç—å UI –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ—Ç—á–µ—Ç–∞
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –æ—Ç—á–µ—Ç–∞ –ø–æ –≤–∏—Ä–∞–ª—å–Ω—ã–º –ø–æ—Å—Ç–∞–º –≤ Telegram
- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–Ω–¥–æ–≤

#### –ó–∞–¥–∞—á–∏:

##### 1.1 ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ì–û–¢–û–í–û)
```sql
-- –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã
CREATE TABLE notification_settings (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES profiles(id),
    bot_token TEXT NOT NULL,
    chat_id TEXT NOT NULL,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE TABLE notification_history (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES profiles(id),
    type TEXT NOT NULL, -- 'viral_report', 'parsing_complete', etc.
    bot_token TEXT,
    chat_id TEXT,
    message_content TEXT,
    status TEXT DEFAULT 'pending', -- 'sent', 'failed'
    sent_at TIMESTAMP WITH TIME ZONE,
    error_message TEXT,
    metadata JSONB DEFAULT '{}'
);

-- –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –≤ prompt_templates
INSERT INTO prompt_templates (name, system_prompt, user_prompt, model_name, temperature, description)
VALUES (
    'viral_trends_analysis',
    '–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∞–Ω–∞–ª–∏–∑—É —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –º–µ–¥–∏–∞ –∏ —Ç—Ä–µ–Ω–¥–æ–≤...',
    '–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–ª–µ–¥—É—é—â–∏–µ –≤–∏—Ä–∞–ª—å–Ω—ã–µ –ø–æ—Å—Ç—ã –∏ –æ–ø—Ä–µ–¥–µ–ª–∏ –æ–±—â–∏–µ —Ç—Ä–µ–Ω–¥—ã...',
    'claude-3-5-sonnet-20241022',
    0.7,
    '–ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤ –≤–∏—Ä–∞–ª—å–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π'
);
```

**‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:** –ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª `migrations/add_viral_trends_prompt.sql`

##### 1.2 ‚úÖ Backend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ì–û–¢–û–í–û)

###### 1.2.1 ‚úÖ Telegram Bot Service (`src/app/telegram_bot.py`) - –ì–û–¢–û–í
```python
import asyncio
import logging
from typing import Optional, Dict, Any
from telegram import Bot
from telegram.error import TelegramError

logger = logging.getLogger(__name__)

class TelegramBotService:
    """–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram Bot API."""

    def __init__(self, token: str):
        self.bot = Bot(token=token)
        self.token = token

    async def send_message(
        self,
        chat_id: str,
        text: str,
        parse_mode: str = 'HTML'
    ) -> bool:
        """–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram."""
        try:
            await self.bot.send_message(
                chat_id=chat_id,
                text=text,
                parse_mode=parse_mode,
                disable_web_page_preview=True
            )
            return True
        except TelegramError as e:
            logger.error(f"Failed to send message: {e}")
            return False

    async def test_connection(self, chat_id: str) -> bool:
        """–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏."""
        test_message = "ü§ñ <b>ReAIboot Bot</b>\n\n–¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ!"
        return await self.send_message(chat_id, test_message)
```

###### 1.2.2 ‚úÖ Report Generator (`src/app/reports.py`) - –ì–û–¢–û–í
```python
from datetime import datetime, timedelta
from typing import List, Dict, Any, Optional
import logging

from .supabase_client import SupabaseManager
from .telegram_bot import TelegramBotService
from .llm.orchestrator import LLMOrchestrator

logger = logging.getLogger(__name__)

class ReportGenerator:
    """–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç—á–µ—Ç–æ–≤ –ø–æ –≤–∏—Ä–∞–ª—å–Ω—ã–º –ø–æ—Å—Ç–∞–º."""

    def __init__(self, supabase_manager: SupabaseManager):
        self.supabase = supabase_manager
        self.orchestrator = LLMOrchestrator()

    async def generate_viral_report(
        self,
        days: int = 7,
        min_viral_score: float = 1.0,
        channel_username: Optional[str] = None
    ) -> Dict[str, Any]:
        """–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç –ø–æ –≤–∏—Ä–∞–ª—å–Ω—ã–º –ø–æ—Å—Ç–∞–º."""

        # –ü–æ–ª—É—á–∞–µ–º –≤–∏—Ä–∞–ª—å–Ω—ã–µ –ø–æ—Å—Ç—ã
        viral_posts = await self._get_viral_posts(days, min_viral_score, channel_username)

        if not viral_posts:
            return {
                "success": False,
                "message": "–ù–µ –Ω–∞–π–¥–µ–Ω–æ –≤–∏—Ä–∞–ª—å–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥"
            }

        # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç—Ä–µ–Ω–¥—ã —á–µ—Ä–µ–∑ LLM
        trends_analysis = await self._analyze_trends(viral_posts)

        # –§–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç—á–µ—Ç
        report = self._format_report(viral_posts, trends_analysis, days)

        return {
            "success": True,
            "report": report,
            "posts_count": len(viral_posts),
            "analysis": trends_analysis
        }

    async def _get_viral_posts(
        self,
        days: int,
        min_score: float,
        channel: Optional[str]
    ) -> List[Dict[str, Any]]:
        """–ü–æ–ª—É—á–∏—Ç—å –≤–∏—Ä–∞–ª—å–Ω—ã–µ –ø–æ—Å—Ç—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö."""
        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞ –∫ Supabase
        pass

    async def _analyze_trends(self, posts: List[Dict[str, Any]]) -> Dict[str, Any]:
        """–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–Ω–¥—ã —á–µ—Ä–µ–∑ LLM."""
        # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç viral_trends_analysis
        pass

    def _format_report(
        self,
        posts: List[Dict[str, Any]],
        analysis: Dict[str, Any],
        days: int
    ) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç –¥–ª—è Telegram."""
        # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ HTML –¥–ª—è Telegram
        pass

    async def send_report_via_bot(
        self,
        report: str,
        bot_token: str,
        chat_id: str
    ) -> bool:
        """–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞."""
        bot = TelegramBotService(bot_token)
        return await bot.send_message(chat_id, report)
```

##### 1.3 ‚úÖ API Endpoints (`src/api_main.py`) - –ì–û–¢–û–í–´

–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

```python
# –ò–º–ø–æ—Ä—Ç—ã
from app.reports import ReportGenerator
from app.telegram_bot import TelegramBotService

# –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
report_generator = ReportGenerator(supabase_manager)

# –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
@app.post("/api/reports/viral-analysis", tags=["reports"])
async def generate_viral_report(
    request: ViralReportRequest,
    current_user: Dict = Depends(get_current_user)
):
    """–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç –ø–æ –≤–∏—Ä–∞–ª—å–Ω—ã–º –ø–æ—Å—Ç–∞–º."""
    pass

@app.post("/api/notifications/test-bot", tags=["notifications"])
async def test_bot_connection(
    bot_token: str,
    chat_id: str,
    current_user: Dict = Depends(get_current_user)
):
    """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram –±–æ—Ç—É."""
    pass

# –ú–æ–¥–µ–ª–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
class ViralReportRequest(BaseModel):
    days: int = 7
    min_viral_score: float = 1.0
    channel_username: Optional[str] = None
    send_to_bot: bool = False
    bot_token: Optional[str] = None
    chat_id: Optional[str] = None
```

##### 1.4 ‚úÖ Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ì–û–¢–û–í–û)

###### 1.4.1 ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç—á–µ—Ç–æ–≤ (`reai-boot-ui/src/app/reports/page.tsx`) - –ì–û–¢–û–í–ê
###### 1.4.2 ‚úÖ –ê–¥–º–∏–Ω —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (`reai-boot-ui/src/app/admin/notifications/page.tsx`) - –ì–û–¢–û–í–ê
###### 1.4.3 ‚úÖ API –∫–ª–∏–µ–Ω—Ç –º–µ—Ç–æ–¥—ã - –î–û–ë–ê–í–õ–ï–ù–´

##### 1.5 ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ì–û–¢–û–í–û)

###### 1.5.1 ‚úÖ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è - –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê
- **Bearer —Ç–æ–∫–µ–Ω—ã –¥–ª—è production:** –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ JWT —Ç–æ–∫–µ–Ω–æ–≤ Supabase Auth —Å –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **JWT Secret:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `SUPABASE_JWT_SECRET` –∏–ª–∏ `SUPABASE_SERVICE_ROLE_KEY`
- **User ID extraction:** –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ –ø–æ–ª—è `sub` —Ç–æ–∫–µ–Ω–∞
- **Fallback –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `TEST_USER_ID` –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å:** API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π, —Ç–∞–∫ –∏ –±–µ–∑ –Ω–µ–µ
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –∑–∞—â–∏—â–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ

###### 1.5.2 ‚úÖ Row Level Security - –ù–ê–°–¢–†–û–ï–ù
- –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è `notification_settings` –∏ `notification_history`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
- –ê–¥–º–∏–Ω—ã –∏–º–µ—é—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø
```tsx
'use client'

import { useState } from 'react'
import { Button } from '@/components/ui/button'
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'
import { apiClient } from '@/lib/api'
import toast from 'react-hot-toast'
import { TrendingUp, Send, Bot, Calendar } from 'lucide-react'

export default function ReportsPage() {
  const [loading, setLoading] = useState(false)
  const [report, setReport] = useState<string>('')

  // –§–æ—Ä–º–∞
  const [formData, setFormData] = useState({
    days: 7,
    minViralScore: 1.0,
    channelUsername: '',
    sendToBot: false,
    botToken: '',
    chatId: ''
  })

  const handleGenerateReport = async () => {
    setLoading(true)
    try {
      const response = await apiClient.generateViralReport(formData)

      if (response.success) {
        setReport(response.report)
        toast.success('–û—Ç—á–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ!')

        if (formData.sendToBot && response.sent) {
          toast.success('–û—Ç—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram!')
        }
      }
    } catch (error) {
      toast.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞')
    } finally {
      setLoading(false)
    }
  }

  return (
    <div className="space-y-6">
      <div className="flex items-center space-x-2">
        <TrendingUp className="w-6 h-6" />
        <h1 className="text-2xl font-bold">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤</h1>
      </div>

      <Card>
        <CardHeader>
          <CardTitle className="flex items-center space-x-2">
            <Calendar className="w-5 h-5" />
            <span>–ê–Ω–∞–ª–∏–∑ –≤–∏—Ä–∞–ª—å–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤</span>
          </CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          {/* –§–æ—Ä–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <Label htmlFor="days">–ü–µ—Ä–∏–æ–¥ –∞–Ω–∞–ª–∏–∑–∞ (–¥–Ω–∏)</Label>
              <Select
                value={formData.days.toString()}
                onValueChange={(value) => setFormData({...formData, days: parseInt(value)})}
              >
                <SelectTrigger>
                  <SelectValue />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="1">1 –¥–µ–Ω—å</SelectItem>
                  <SelectItem value="3">3 –¥–Ω—è</SelectItem>
                  <SelectItem value="7">7 –¥–Ω–µ–π</SelectItem>
                  <SelectItem value="14">14 –¥–Ω–µ–π</SelectItem>
                  <SelectItem value="30">30 –¥–Ω–µ–π</SelectItem>
                </SelectContent>
              </Select>
            </div>

            <div>
              <Label htmlFor="minViralScore">–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π Viral Score</Label>
              <Input
                id="minViralScore"
                type="number"
                step="0.1"
                value={formData.minViralScore}
                onChange={(e) => setFormData({...formData, minViralScore: parseFloat(e.target.value)})}
              />
            </div>
          </div>

          {/* Telegram –±–æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ */}
          <div className="space-y-4">
            <div className="flex items-center space-x-2">
              <input
                type="checkbox"
                id="sendToBot"
                checked={formData.sendToBot}
                onChange={(e) => setFormData({...formData, sendToBot: e.target.checked})}
              />
              <Label htmlFor="sendToBot">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram –±–æ—Ç–∞</Label>
            </div>

            {formData.sendToBot && (
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <Label htmlFor="botToken">Bot Token</Label>
                  <Input
                    id="botToken"
                    value={formData.botToken}
                    onChange={(e) => setFormData({...formData, botToken: e.target.value})}
                    placeholder="8364173996:AAH2BFSuA_cN7JHQ5Gds5O3MNS-KXxpK0wE"
                  />
                </div>
                <div>
                  <Label htmlFor="chatId">Chat ID</Label>
                  <Input
                    id="chatId"
                    value={formData.chatId}
                    onChange={(e) => setFormData({...formData, chatId: e.target.value})}
                    placeholder="–í–∞—à Chat ID"
                  />
                </div>
              </div>
            )}
          </div>

          <Button
            onClick={handleGenerateReport}
            disabled={loading}
            className="w-full"
          >
            {loading ? '–ì–µ–Ω–µ—Ä–∏—Ä—É—é –æ—Ç—á–µ—Ç...' : '–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç'}
          </Button>
        </CardContent>
      </Card>

      {/* –ü—Ä–µ–≤—å—é –æ—Ç—á–µ—Ç–∞ */}
      {report && (
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center space-x-2">
              <Bot className="w-5 h-5" />
              <span>–û—Ç—á–µ—Ç</span>
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div
              className="whitespace-pre-wrap text-sm bg-gray-50 p-4 rounded-lg"
              dangerouslySetInnerHTML={{ __html: report.replace(/\n/g, '<br>') }}
            />
          </CardContent>
        </Card>
      )}
    </div>
  )
}
```

### üöÄ **–≠—Ç–∞–ø 2: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**

#### –¶–µ–ª–∏:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ UI

#### –ó–∞–¥–∞—á–∏:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è APScheduler
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π
- UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –æ—Ç–ø—Ä–∞–≤–æ–∫

### üöÄ **–≠—Ç–∞–ø 3: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**

#### –¶–µ–ª–∏:
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ **–≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤ - –ì–û–¢–û–í**

- [x] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ Supabase
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å TelegramBotService
- [x] –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–Ω–¥–æ–≤
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å ReportGenerator
- [x] –î–æ–±–∞–≤–∏—Ç—å API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- [x] –°–æ–∑–¥–∞—Ç—å UI —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—Ç—á–µ—Ç–æ–≤
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –≤ –±–æ—Ç–∞
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
- [x] **–£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç –∞–Ω–∞–ª–∏–∑–∞ –¥–æ 20 –ø–æ—Å—Ç–æ–≤**
- [x] **–£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–º–ø—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π**
- [x] **–î–æ–±–∞–≤–∏—Ç—å HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Telegram**
- [x] **–ò—Å–ø—Ä–∞–≤–∏—Ç—å markdown-to-HTML –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é**

### üîÑ **–≠—Ç–∞–ø 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥**

- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å APScheduler
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å UI —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è–º–∏
- [ ] –°–æ–∑–¥–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### üîÑ **–≠—Ç–∞–ø 3: –†–∞—Å—à–∏—Ä–µ–Ω–∏—è**

- [ ] –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏
- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```txt
# –î–æ–±–∞–≤–ª—è–µ–º –≤ requirements.txt
APScheduler==3.10.4
python-telegram-bot==20.7
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```env
# –î–æ–±–∞–≤–ª—è–µ–º –≤ .env
TELEGRAM_BOT_TOKEN=8364173996:AAH2BFSuA_cN7JHQ5Gds5O3MNS-KXxpK0wE
TELEGRAM_CHAT_ID=–≤–∞—à_chat_id
```

### API endpoints
- `POST /api/reports/viral-analysis` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞
- `POST /api/notifications/test-bot` - —Ç–µ—Å—Ç –±–æ—Ç–∞
- `GET /api/reports/history` - –∏—Å—Ç–æ—Ä–∏—è –æ—Ç—á–µ—Ç–æ–≤

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

- **–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤**: 100% –¥–æ—Å—Ç–∞–≤–∫–∞ –≤ Telegram
- **–í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**: < 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Ç–∏–ø–∏—á–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞
- **–ö–∞—á–µ—Å—Ç–≤–æ –∞–Ω–∞–ª–∏–∑–∞**: –†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ—Ç LLM
- **UX**: –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤

---

## üö® –†–∏—Å–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

### –†–∏—Å–∫–∏:
1. **Rate limits Telegram** - –†–µ—à–µ–Ω–∏–µ: –æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π
2. **–î–æ–ª–≥–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤** - –†–µ—à–µ–Ω–∏–µ: background tasks
3. **–û—à–∏–±–∫–∏ LLM** - –†–µ—à–µ–Ω–∏–µ: fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- –õ–æ–≥–∏ –≤—Å–µ—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

---

## üöÄ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

### **–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å:**

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   cd /Users/Igor/ReAIboot\ TG
   source venv/bin/activate
   python -m uvicorn src.api_main:app --reload --host 0.0.0.0 --port 8001
   ```

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API:**
   ```bash
   # Health check
   curl http://localhost:8001/health

   # –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞
   curl -X POST "http://localhost:8001/api/reports/viral-analysis" \
     -H "Content-Type: application/json" \
     -d '{"days": 7, "min_viral_score": 1.0}'
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å UI:**
   ```bash
   cd reai-boot-ui
   npm run dev
   ```
   –û—Ç–∫—Ä—ã—Ç—å http://localhost:3001/reports

4. **–ü–æ–ª—É—á–∏—Ç—å Chat ID –¥–ª—è –±–æ—Ç–∞:**
   - –ù–∞–ø–∏—Å–∞—Ç—å –±–æ—Ç—É @iivka_bot –≤ Telegram
   - –ü–æ–ª—É—á–∏—Ç—å chat_id —á–µ—Ä–µ–∑ API –∏–ª–∏ –ª–æ–≥–∏

5. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –≤ –±–æ—Ç–∞:**
   - –í UI Reports –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª—è
   - –í–∫–ª—é—á–∏—Ç—å "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram –±–æ—Ç–∞"
   - –£–∫–∞–∑–∞—Ç—å bot token –∏ chat_id
   - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç

### **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:**

#### ‚úÖ **–ì–û–¢–û–í–û - –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:**
1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω—ã SQL –º–∏–≥—Ä–∞—Ü–∏–∏:
   - `migrations/add_viral_trends_prompt.sql` - –ø—Ä–æ–º–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–Ω–¥–æ–≤
   - `migrations/add_notifications_tables.sql` - —Ç–∞–±–ª–∏—Ü—ã –∏ RLS –ø–æ–ª–∏—Ç–∏–∫–∏
2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:** ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ
   - Backend: `TELEGRAM_BOT_TOKEN` —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ .env
   - Frontend: –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `process.env`
3. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
   - `python-telegram-bot` –≤ requirements.txt
   - `@radix-ui/react-switch` –¥–ª—è UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### üîÑ **–¢–†–ï–ë–£–ï–¢ –í–´–ü–û–õ–ù–ï–ù–ò–Ø:**
4. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Supabase:**
   ```sql
   -- –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤ SQL Editor Supabase:
   INSERT INTO auth.users (id, email, created_at, updated_at)
   VALUES ('550e8400-e29b-41d4-a716-446655440000', 'test@example.com', NOW(), NOW())
   ON CONFLICT (id) DO NOTHING;

   INSERT INTO profiles (id, email, full_name, role, created_at, updated_at)
   VALUES ('550e8400-e29b-41d4-a716-446655440000', 'test@example.com', 'Test User', 'admin', NOW(), NOW())
   ON CONFLICT (id) DO NOTHING;
   ```

   **–ò–õ–ò –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π user_id:**
   ```bash
   export TEST_USER_ID="–≤–∞—à-—Ä–µ–∞–ª—å–Ω—ã–π-user-id-–∏–∑-supabase"
   ```

   **–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL:**
   ```bash
   # –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API:
   curl -X POST "http://localhost:8001/api/notifications/settings" \
     -H "Content-Type: application/json" \
     -d '{"bot_name": "iivka_bot", "chat_id": "230881121", "is_active": true}'
   ```

5. **Chat ID:** –ü–æ–ª—É—á–∏—Ç—å –º–æ–∂–Ω–æ —Ç–∞–∫:
   - –ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É @iivka_bot –≤ Telegram
   - –ù–∞–∂–∞—Ç—å "–ü–æ–ª—É—á–∏—Ç—å" –≤ –∞–¥–º–∏–Ω–∫–µ - chat_id –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ò–ª–∏ –≤–≤–µ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

---

## üìä **–§–ò–ù–ê–õ–¨–ù–´–ô –°–¢–ê–¢–£–° –°–ò–°–¢–ï–ú–´ –£–í–ï–î–û–ú–õ–ï–ù–ò–ô**

### ‚úÖ **–ì–û–¢–û–í–û (100%):**
- Backend API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- Telegram Bot –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π)
- –ü–æ–ª—É—á–µ–Ω–∏–µ chat_id –∏–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –±–æ—Ç–∞
- LLM –∞–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤ –≤–∏—Ä–∞–ª—å–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤
- –ü–æ–ª–Ω–∞—è UI –∞–¥–º–∏–Ω–∫–∞ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å JWT + fallback –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- Row Level Security –ø–æ–ª–∏—Ç–∏–∫–∏
- –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

### ‚úÖ **–í–°–ï –ì–û–¢–û–í–û –ò –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û:**
- ‚úÖ **–°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ Supabase** (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π user_id)
- ‚úÖ **API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **Telegram Bot** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **Chat ID –ø–æ–ª—É—á–µ–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### üéØ **–û–°–ù–û–í–ù–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò:**
1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤** –ø–æ –≤–∏—Ä–∞–ª—å–Ω—ã–º –ø–æ—Å—Ç–∞–º
2. **LLM –∞–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤** —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
3. **–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram** —Å –∫—Ä–∞—Å–∏–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
4. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏** —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
5. **–ú–Ω–æ–≥–æ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** —Å RLS

## üß™ **–†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:**

### ‚úÖ **API Endpoints:**
- `POST /api/notifications/settings` - ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- `GET /api/notifications/settings` - ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- `POST /api/notifications/get-chat-id` - ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ chat_id —Ä–∞–±–æ—Ç–∞–µ—Ç
- `POST /api/notifications/test-bot` - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- `POST /api/reports/viral-analysis` - ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç Telegram —Å–µ—Å—Å–∏–∏ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞

### ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å —Ä–µ–∞–ª—å–Ω—ã–º user_id: `299bec46-494d-449e-92d5-c88eb055436a`
- Row Level Security —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç

### ‚úÖ **Telegram Bot:**
- –£—Å–ø–µ—à–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- Chat ID –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω: `230881121`
- Bot token –±–µ—Ä–µ—Ç—Å—è –∏–∑ `.env` —Ñ–∞–π–ª–∞

### ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- JWT –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (fallback –Ω–∞ TEST_USER_ID)
- –†–µ–∞–ª—å–Ω—ã–π user_id –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ RLS

*–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!* üöÄ
