#!/usr/bin/env python3

import os
from src.app.supabase_client import SupabaseClient

os.environ['SUPABASE_URL'] = 'https://oxsvtjtgtdaqoslcxdna.supabase.co'
os.environ['SUPABASE_SERVICE_ROLE_KEY'] = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im94c3Z0anRndGFxb3NsY3hkbmEiLCJyb2xlIjoic2VydmljZV9yb2xlIiwiaWF0IjoxNzI2NDU4OTcyLCJleHAiOjIwNDIwMjQ5NzJ9.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im94c3Z0anRndGFxb3NsY3hkbmEiLCJyb2xlIjoic2VydmljZV9yb2xlIiwiaWF0IjoxNzI2NDU4OTcyLCJleHAiOjIwNDIwMjQ5NzJ9'

client = SupabaseClient()

# –ù–æ–≤—ã–π —É–ª—É—á—à–µ–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç
new_user_prompt = '''–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–ª–µ–¥—É—é—â–∏–µ {{posts_count}} –≤–∏—Ä–∞–ª—å–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –∏ –¥–∞–π –ö–û–ù–ö–†–ï–¢–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤–∏—Ä—É—Å–Ω—ã–º –≤ Telegram.

üéØ –ö–õ–Æ–ß–ï–í–´–ï –ó–ê–î–ê–ß–ò –ê–ù–ê–õ–ò–ó–ê:

1. **–¢–û–ü –¢–ï–ú –ò –¢–†–ï–ù–î–û–í** - –ö–∞–∫–∏–µ —Ç–µ–º—ã –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è —á–∞—â–µ –≤—Å–µ–≥–æ –∏ –ø–æ—á–µ–º—É –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
2. **–í–ò–†–ê–õ–¨–ù–´–ï –•–£–ö–ò** - –ö–∞–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –ø–µ—Ä–≤—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Ü–µ–ø–ª—è—é—Ç –≤–Ω–∏–º–∞–Ω–∏–µ
3. **–§–û–†–ú–ê–¢–´ –ö–û–ù–¢–ï–ù–¢–ê** - –ö–∞–∫–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –ø–æ—Å—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –ª—É—á—à–µ –≤—Å–µ–≥–æ
4. **–≠–ú–û–¶–ò–û–ù–ê–õ–¨–ù–´–ï –¢–†–ò–ì–ì–ï–†–´** - –ö–∞–∫–∏–µ —ç–º–æ—Ü–∏–∏ –≤—ã–∑—ã–≤–∞—é—Ç –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å
5. **–ì–û–†–Ø–ß–ò–ï –¢–ï–ú–´** - –¢–æ–ø-5 —Ç–µ–º, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Å—Ç–∞—Ö

üìä –°–¢–†–£–ö–¢–£–†–ê –ê–ù–ê–õ–ò–ó–ê:

**üî• –ì–û–†–Ø–ß–ò–ï –¢–ï–ú–´ (–¢–û–ü-5):**
‚Ä¢ –¢–µ–º–∞ 1: —Å–∫–æ–ª—å–∫–æ –ø–æ—Å—Ç–æ–≤, –ø–æ—á–µ–º—É –ø–æ–ø—É–ª—è—Ä–Ω–∞
‚Ä¢ –¢–µ–º–∞ 2: —Å–∫–æ–ª—å–∫–æ –ø–æ—Å—Ç–æ–≤, –ø–æ—á–µ–º—É –ø–æ–ø—É–ª—è—Ä–Ω–∞
‚Ä¢ ...

**üéØ –†–ê–ë–û–¢–ê–Æ–©–ò–ï –•–£–ö–ò (–ö–û–ù–ö–†–ï–¢–ù–´–ï –ü–†–ò–ú–ï–†–´):**
‚Ä¢ "–•—É–∫ 1" - –ø–æ—á–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç + –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚Ä¢ "–•—É–∫ 2" - –ø–æ—á–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç + –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚Ä¢ ...

**üìù –§–û–†–ú–ê–¢–´ –ü–û–°–¢–û–í:**
‚Ä¢ –§–æ—Ä–º–∞—Ç 1: –æ–ø–∏—Å–∞–Ω–∏–µ + –ø—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚Ä¢ –§–æ—Ä–º–∞—Ç 2: –æ–ø–∏—Å–∞–Ω–∏–µ + –ø—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚Ä¢ ...

**üí° –ö–û–ù–ö–†–ï–¢–ù–´–ï –ò–î–ï–ò –î–õ–Ø –ö–û–ù–¢–ï–ù–¢–ê:**
‚Ä¢ –ò–¥–µ—è 1: –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ + –∑–∞–≥–æ–ª–æ–≤–æ–∫ + —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚Ä¢ –ò–¥–µ—è 2: –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ + –∑–∞–≥–æ–ª–æ–≤–æ–∫ + —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚Ä¢ ...

**üé® –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –û–§–û–†–ú–õ–ï–ù–ò–Æ:**
‚Ä¢ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–º–æ–¥–∑–∏
‚Ä¢ –ö–∞–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç
‚Ä¢ –ö–∞–∫ –¥–æ–±–∞–≤–ª—è—Ç—å –ø—Ä–∏–∑—ã–≤—ã –∫ –¥–µ–π—Å—Ç–≤–∏—é

–ü–û–°–¢–´ –î–õ–Ø –ê–ù–ê–õ–ò–ó–ê:
{{posts_text}}

‚ö†Ô∏è –í–ê–ñ–ù–û: –î–∞–π –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û –ö–û–ù–ö–†–ï–¢–ù–´–ï —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏. –ü–æ—Å–ª–µ –ø—Ä–æ—á—Ç–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞ —è –¥–æ–ª–∂–µ–Ω —Å—É–º–µ—Ç—å —Å—Ä–∞–∑—É —Å–æ–∑–¥–∞—Ç—å 3-5 –ø–æ—Å—Ç–æ–≤ –¥–ª—è —Å–≤–æ–µ–≥–æ –∫–∞–Ω–∞–ª–∞.'''

result = client.client.table('llm_prompts').update({'user_prompt': new_user_prompt}).eq('name', 'viral_trends_analysis').execute()
print('Prompt updated successfully')
print(f"New prompt length: {len(new_user_prompt)}")
